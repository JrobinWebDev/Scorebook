/*!
 * Scorebook.
 * https://www.github.com/ryansmith94/Scorebook
 *
 * Copyright 2013, Ryan Smith and contributors.
 * Released under the MIT license.
 * http://opensource.org/licenses/MIT
 *
 * 2013-06-11, 20:17.
*/
!function(a){"use strict";var b=function(a,b){var c=a,d=Object.keys(c),e=d.length,f=0;return function g(){return c[d[f]]===b[d[f]]?(f+=1,e>=f?g():!0):!1}()},c=function(a,b,c){var d=a[a.length-1];c.id=b.length,c.parent=d,c.children=[],d.children.push(c),b.push(c)},d=function(a,c){var d=a.length-1,e=[];return function f(g){b(c,a[g])&&e.push(a[g]),d>g&&f(g+1)}(0),e},e=function(){var a=this,b=[],e=[],f=[],g=[];return a.addInnings=function(d){return c([{children:[]}],b,{battingTeam:d}),a},a.addOver=function(d){return c(b,e,{bowler:d}),a},a.addBall=function(b,d,g,h,i,j,k,l,m,n,o,p,q){return c(e,f,{batsman:b,runs:Number(d),wideBall:Boolean(g),noBall:Boolean(h),byes:Boolean(i),legByes:Boolean(j),wagonX:Number(l),wagonY:Number(m),pitchX:Number(n),pitchY:Number(o),batPen:Number(p),bwlPen:Number(q),dateTime:new Date}),a},a.addWicket=function(b,d,e){return c(f,g,{batsman:b,howOut:d,fielder:e}),a},a.getInnings=function(a){return d(b,a)},a.getOvers=function(a){return d(e,a)},a.getBalls=function(a){return d(f,a)},a.getWickets=function(a){return d(g,a)},a.undo=function(){var c=g[g.length-1]||{parent:null},d=f[f.length-1]||{parent:null},h=e[e.length-1]||{parent:null},i=b[b.length-1]||{parent:null},j=c.parent===d?[g,d]:d.parent===h?[f,h]:h.parent===i?[e,i]:[b,{children:[i]}];return j[1].children.pop(),j[0].pop(),a},a.data={innings:b,overs:e,balls:f,wickets:g},a};a.scorebook=function(){return new e}}(this);