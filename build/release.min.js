/*!
 * Scorebook.
 * https://www.github.com/ryansmith94/Scorebook
 *
 * Copyright 2013, Ryan Smith and contributors.
 * Released under the MIT license.
 * http://opensource.org/licenses/MIT
 *
 * 2013-06-12, 16:18.
*/
!function(a,b,c){"use strict";var d=function(a,b){var c=Object.keys(a),d=c.length,e=0;return function f(){return a[c[e]]===b[c[e]]?(e+=1,d>=e?f():!0):!1}()},e=function(a,b,c){var d=a[a.length-1];c.id=b.length,c.parent=d,c.children=[],d.children.push(c),b.push(c)},f=function(a,b){return a.filter(function(a){return d(b,a)})},g=function(){var a=this,d=[],g=[],h=[],i=[];return a.addInnings=function(b){return e([{children:[]}],d,{battingTeam:b}),a},a.addOver=function(b){return e(d,g,{bowler:b}),a},a.addBall=function(d,f,i,j,k,l,m,n,o,p,q,r,s){return e(g,h,{batsman:d,runs:b(f),wideBall:c(i),noBall:c(j),byes:c(k),legByes:c(l),wagonX:b(n),wagonY:b(o),pitchX:b(p),pitchY:b(q),batPen:b(r),bwlPen:b(s),dateTime:new Date}),a},a.addWicket=function(b,c,d){return e(h,i,{batsman:b,howOut:c,fielder:d}),a},a.getInnings=function(a){return f(d,a)},a.getOvers=function(a){return f(g,a)},a.getBalls=function(a){return f(h,a)},a.getWickets=function(a){return f(i,a)},a.undo=function(){var b=i[i.length-1]||{parent:null},c=h[h.length-1]||{parent:null},e=g[g.length-1]||{parent:null},f=d[d.length-1]||{parent:null},j=b.parent===c?[i,c]:c.parent===e?[h,e]:e.parent===f?[g,f]:[d,{children:[f]}];return j[1].children.pop(),j[0].pop(),a},a.data={innings:d,overs:g,balls:h,wickets:i},a};a.scorebook=function(){return new g}}(this,Number,Boolean);